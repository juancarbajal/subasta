yOSON.AppCore.addModule("slide-toogle",function(b){var a=$(".slide-toogle");var c;return{init:function(d){a.click(function(e){if(!$(e.target).hasClass("notbind")){c=$(this).attr("data-id");if($(this).hasClass("active")){$(this).removeClass("active")}else{$(this).addClass("active")}$(c).slideToggle()}})},other:function(){},destroy:function(){}}});yOSON.AppCore.addModule("menu",function(b){var f=$("#menu").children("li");var c=$("#menu ul");var e=$("#menu .active").siblings("ul");var a,d;return{currentMenu:function(){c.hide();e.show()},init:function(g){var h=this;h.currentMenu();$.each(f,function(i,j){a=$(j).position();d=644-a.left;$("ul",$(j)).css("width",d)});f.mouseenter(function(){if($("ul",this).length){c.hide();$("ul",this).show()}}).mouseleave(function(){h.currentMenu()})},destroy:function(){}}});yOSON.AppCore.addModule("nav-tree",function(b){var a=$(".category h2, .subcat h3");return{init:function(c){a.live("click",function(d){if($(d.target).attr("type")==undefined){if($(this).hasClass("active")){$(this).removeClass("active")}else{$(this).addClass("active")}$(this).siblings("ul").slideToggle()}})},destroy:function(){}}});yOSON.AppCore.addModule("state-order",function(c){var a=$(".select-state"),b;return{init:function(d){a.bind("change",function(){b=$(this).val();if($(b).length){$.colorbox({inline:true,href:b})}})},destroy:function(){}}},["libs/plugins/jqColorBox.js","plugins/jqColorBox.css"]);yOSON.AppCore.addModule("product-manage-image",function(b){var a=$(".category h2, .subcat h3");var c;return{init:function(e){var d="product/tmp/",k=yOSON.baseHost+"admin/producto/agregar-imagen/id/1",i=yOSON.baseHost+"admin/producto/delete-img-tmp/img/",j=".jpg",h={frm:"frmConfis",parentRight:".fielset-content-right",parentLeft:".fielset-content-left",inputFile:"#image-uploader",inputDesc:"#img-description",btnAdd:"#addProductImage"},f={frm:h.frm,onComplete:function(l){var m=$.parseJSON(l);$(h.inputFile).val("");$padre=$(h.inputFile).parent();$hijo=$(h.inputFile);$padre.html("");$padre.append($hijo);$("#"+h.frm).attr("action","");$("#"+h.frm).attr("target","");$(h.inputDesc).val("");if(m.status==1){$(h.parentRight).append('<div class="w170" id="'+m.url+'"><div class="options"><div class="item-del"><a title="eliminar" href="javascript:;"><img class="" alt="eliminar" src="'+yOSON.statHost+'img-admin/remove.png"></a></div><div class="item-fav"><a title="default" href="javascript:;"><img class="" alt="default" src="'+yOSON.statHost+'img-admin/fav.png"></a></div></div><a title="imagen" href="javascript:;"><img class="main-class" alt="imagen" src="'+yOSON.eHost+d+m.url+j+'"></a><p>'+m.description+"</p></div>");$(h.parentRight).trigger("change")}else{Console.log(m.status)}}};$(h.btnAdd).click(function(){$("#"+h.frm).attr("action",k);$.fn.iframeUp("submit",f)});var g={frm:"#"+h.frm,parentRight:h.parentRight,parentLeft:h.parentLeft,url_del:i};$.fn.pictureManager(g)},destroy:function(){}}},["libs/plugins/jqUploader.js","libs/plugins/jqPictureManager.js","libs/plugins/ui.js"]);yOSON.AppCore.addModule("validation",function(a){return{init:function(b){$(b.form).validate({ignore:"",rules:requires[b.form].rules,messages:requires[b.form].messages,errorPlacement:function(c,d){$(d).parent().append(c)},invalidHandler:(requires[b.form].hasOwnProperty("invalidHandler"))?requires[b.form].invalidHandler:function(){}})},destroy:function(){}}},["libs/plugins/jqValidate.js"]);yOSON.AppCore.addModule("tabs-products",function(c){var e=$("#frmConfis .content-tabs");var d=$(".nav-options li a");var b=$("#precio_proveedor, #precio_base, #porcentaje_ganancia");var a=$("#id_shop");return{init:function(f){d.each(function(g,h){$(h).bind("click",(function(i){return function(j){j.preventDefault();Console.log(e.get(i));e.fadeOut(400);$(e.get(i)).fadeIn(400)}})(g))});this.doWysiwyg();b.add("#venta_con_igv").numeric({negative:false,decimal:".",length:10});b.add("#venta_con_igv").bind("keyup",this.doCalcule);this.doCalcule();this.doTree()},doCalcule:function(){var h=$.trim($("#precio_base").val());var i=(h=="")?0:parseFloat(h);$("#venta_con_igv").attr("readonly",(i<=0));Console.log(this);var g=($(this).attr("id")=="venta_con_igv");if(!g){var l=$.trim($("#porcentaje_ganancia").val());var f=(l=="")?0:parseFloat(l);$("#venta_sin_igv").val(Math.round((i*(1+(f/100)))*Math.pow(10,2))/Math.pow(10,2));$("#venta_con_igv").val(Math.round(parseFloat($("#venta_sin_igv").val())*1.18*Math.pow(10,2))/Math.pow(10,2))}else{var j=$.trim($("#venta_con_igv").val());var k=(j=="")?0:parseFloat(j);$("#porcentaje_ganancia").val(Math.round((parseFloat(k)/(1.18*i)-1)*100*Math.pow(10,2))/Math.pow(10,2));var f=($.trim($("#porcentaje_ganancia").val())=="")?0:parseFloat($("#porcentaje_ganancia").val());$("#venta_sin_igv").val(Math.round((i*(1+(f/100)))*Math.pow(10,2))/Math.pow(10,2))}$("#precio_final_con_oferta").val(Math.round(parseFloat($("#venta_sin_igv").val())*0.8*1.18*100)/100)},doWysiwyg:function(){new nicEditor({iconsPath:yOSON.statHost+"img/nicEditorIcons.gif",buttonList:["bold","italic","underline","left","center","right","justify","ol","ul"],maxHeight:100}).panelInstance("descripcion");$('.nicEdit-main[contentEditable="true"]').bind("keyup",function(){var f=/>?[^>^<]+<?/gi.test($.trim($(this).html()))?$(this).html():"";$("#descripcion").val(f);$("#descripcion").trigger("keyup")}).bind("keydown",function(g){var f=g.charCode?g.charCode:g.keyCode?g.keyCode:0;$("#id-error-desc").css("display","block").html("Le queda "+(250-$(this).text().length)+" caracteres por escribir.");if($(this).text().length>=250&&!/^(37|38|39|40|13|8)$/.test(f)){return false}})},doTree:function(){a.bind("change",function(){var h=$.trim($("option:selected",this).val());Console.log(h);var g=$.trim($(this).attr("id-prod"));Console.log(h);var f=g!=""?"/product/"+g:"";$.getJSON(yOSON.baseHost+"admin/producto/get-json-category-filter/shop/"+h+f,function(j){var i="";$.each(j.d,function(l,k){i+='<li class="category">';i+="<h2>"+k.n+'<span class="slip"></span><span class="icon"></span></h2>';i+='<ul class="content-subcat">';$.each(k.c,function(m,n){i+='<li class="subcat">';i+="<h3>"+n.n[0]+'<span class="slip"></span><span class="icon"></span><input name="subcategoria[]" type="checkbox" value="'+n.i+'" name="subcatweg" '+(n.n[1]!="0"?"checked":"")+" /></h3>";i+='<ul class="content-attr">';$.each(n.c,function(o,p){i+='<li class="attr">';i+="<h4>"+p.n+'<span class="icon"></span></h4>';i+="<ul>";$.each(p.c,function(q,r){i+='<li><label class="checkbox"><input name="filtro[]" type="checkbox" value="'+q+'" '+(r[1]!="0"?"checked":"")+" />"+r[0]+"</label></li>"});i+="</ul>";i+="</li>"});i+="</ul>";i+="</li>"});i+="</ul>";i+="</li>"});$(".content-tree #main-tree").html(i);$('li.subcat h3 input[type="checkbox"]').each(function(m,n){var l=$($(n).parent()).siblings("ul.content-attr");var k=$('input[type="checkbox"]',l);k.bind("click",(function(o){return function(){var p=$(this).prop("checked");if(!p){k.each(function(q,r){if($(r).attr("checked")){p=true;return false}})}$(o).attr("checked",p)}})(n))})});$.getJSON(yOSON.baseHost+"admin/producto/get-json-sub-category/shop/"+h+f,function(j){var i='<select name="categoria_defecto" id="categoria_defecto" class="valid">';i+='<option value="">Seleccione</option>';console.log("|get-json-sub-category---------------------------|");console.log(j.d);console.log("|get-json-sub-category---------------------------|");$.each(j.d,function(l,k){i+='<optgroup label="'+k.np+'">';if(k.hasOwnProperty("c")){$.each(k.c,function(n,m){if(m.hasOwnProperty("n")){i+='<option value="'+n+'" '+(m.n[1]!="0"?"selected":"")+">"+m.n[0]+"</option>"}})}i+="</optgroup>"});i+="</select>";$("#categoria_defecto").parent().html(i)})}).trigger("change")},destroy:function(){}}},["libs/simpleNicEdit.js","libs/plugins/jqNumeric.js"]);yOSON.AppCore.addModule("list-product",function(b){var c=$("#frm");var e=$("#h_act");var d=$('.t-show input[type="checkbox"]');var a=$("#gridNumPage");return{init:function(f){d.bind("click",this.changeStateReg);b.events(["submit-paginate"],function(h,g){h.bind("change",function(){g.submit()})},this).trigger("submit-paginate",[a,c])},changeStateReg:function(){var g=$(this).attr("id").split("active")[1];var f=$(this).attr("checked")?"1":"0";d.attr("disabled",true);Console.log(g+"-"+f);e.val(g+"|"+f);c.submit()},destroy:function(){}}});yOSON.AppCore.addModule("list-orders",function(b){var c=$("#frm");var e=$("#h_act");var d=$('.t-show input[type="checkbox"]');var a=$("#gridNumPage");return{init:function(f){d.bind("click",this.changeStateReg);b.trigger("submit-paginate",[a,c])},changeStateReg:function(){var g=$(this).attr("id").split("active")[1];var f=$(this).attr("checked")?"1":"0";d.attr("disabled",true);Console.log(g+"-"+f);e.val(g+"|"+f);c.submit()},destroy:function(){}}});yOSON.AppCore.addModule("select-information",function(a){return{init:function(c){var b=$("#destaque"),e=$("#destaque option:selected"),d=$(".select-option"),f;f="#"+e.attr("label");if($(f).length){$(f).show()}b.change(function(){e=$("#destaque option:selected");f="#"+e.attr("label");d.hide();if($(f).length){$(f).fadeIn(500)}})},destroy:function(){}}});yOSON.AppCore.addModule("date-products",function(a){return{init:function(c){var d=$("#destaque_fecha");var b=$("#discount_start_date");var e=$("#discount_end_date");d.datepicker({dateFormat:"dd-mm-yy",showOn:"button",minDate:0,buttonImage:yOSON.statHost+"img-admin/datepicker.png",buttonImageOnly:true});b.datepicker({dateFormat:"dd-mm-yy",showOn:"button",minDate:0,buttonImage:yOSON.statHost+"img-admin/datepicker.png",buttonImageOnly:true,onSelect:function(f){e.datepicker("option","minDate",f)}});e.datepicker({dateFormat:"dd-mm-yy",showOn:"button",minDate:0,buttonImage:yOSON.statHost+"img-admin/datepicker.png",buttonImageOnly:true})},destroy:function(){}}},["plugins/start/jquery-ui-1.8.22.custom.css","libs/plugins/min/jqDatepicker.js"]);