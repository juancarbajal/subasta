(function(b){var a={init:function(e){e.id="frm_"+Math.floor(Math.random()*99999);var f=b("<div/>").html('<iframe style="display:none" src="about:blank" id="'+e.id+'" name="'+e.id+"\" onload=\"$.fn.iframeUp('load','"+e.id+"')\" onunload=\"$.fn.iframeUp('unload','"+e.id+"')\"></iframe>");b("body").append(f);var c=document.getElementById(e.id);if(e&&typeof(e.onSuccess)=="function"){c.onSuccess=e.onSuccess}if(e&&typeof(e.onComplete)=="function"){c.onComplete=e.onComplete}return e.id},form:function(d,c){b("#"+d).attr("target",c)},submit:function(d){var g={frm:"frm_add",submit:true,loader:true,loading:function(i){b(".options-image .third-columm").append('<img id="loader-photo" src="'+yOSON.baseHost+'f/img/loaderKotear.gif" style="width:20px;height:20px;float:right;margin-left:0px">');b("#addProductImage").attr("disabled","disabled")},afterSend:function(i){},onSuccess:function(j,i,k){setTimeout(function(){b("#"+k).parent().remove();b.fn.iframeUp("unload",k,j);b(".options-image .third-columm #loader-photo").fadeOut("slow",function(){b(this).remove()});b("#addProductImage").removeAttr("disabled");if(b(".msg-error-images").length!=0){b(".msg-error-images").fadeOut("slow",function(){b(this).remove()})}},50)}},f=b.extend({},g,d);f.isIE=!b.support.opacity&&!b.support.style;f.isIE6=f.isIE&&!window.XMLHttpRequest;b.fn.iframeUp("form",f.frm,b.fn.iframeUp("init",f));if(f&&typeof(f.beforeSend)=="function"){f.beforeSend(f)}if(f.submit==true){var h=b("#ids_hidden_ad").val(),c=b.trim(h)!==""?h.split("-"):[],e=c.length;if(e==_cantImg){alert("test _cant");b("#addProductImage").attr("disabled","disabled");b.fancybox({content:'<div class="message-modal"><div class="title-gen"><h3 class="title-step"><span class="icon-right"></span><p>Mensaje</p></h3></div><p>Solo puedes ingresar <strong style="font-size:16px">'+_cantImg+"</strong> imagenes.</p></div>",onClosed:function(){b("#photo_product").val("")}});return false}else{if(/(\.gif|\.jpg|\.png)/gi.test()){b.fancybox('<div class="message-modal"><div class="title-gen"><h3 class="title-step"><span class="icon-right"></span><p>Mensaje</p></h3></div><p>Solo puedes subir imagenes <strong style="font-size:16px">jpg</strong> , <strong style="font-size:16px">png</strong> o <strong style="font-size:16px">gif</strong> </p></div>');return false}else{document.getElementById(f.frm).submit()}}}if(f&&typeof(f.afterSend)=="function"){f.afterSend(f)}if(f.loader==true){if(f&&typeof(f.loading)=="function"){f.loading(f)}}},load:function(e){var c=document.getElementById(e);if(c.contentDocument){var d=c.contentDocument}else{if(c.contentWindow){d=c.contentWindow.document}else{d=window.frames[e].document}}if(d.location.href=="about:blank"){return}if(typeof(c.onSuccess)=="function"){c.onSuccess(d.body.innerHTML,c,e)}if(typeof(c.onComplete)=="function"){c.onComplete(d.body.innerHTML,c)}},unload:function(c){}};b.fn.iframeUp=function(c){if(a[c]){return a[c].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof c==="object"||!c){return a.init.apply(this,arguments)}else{b.error("Method "+c+" does not exist on jQuery.iframeUp")}}}})(jQuery);