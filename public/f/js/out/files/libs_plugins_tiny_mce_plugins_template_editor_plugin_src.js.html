<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>libs&#x2F;plugins&#x2F;tiny_mce&#x2F;plugins&#x2F;template&#x2F;editor_plugin_src.js</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.7.0&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.7.0&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="..&#x2F;assets/css/logo.png" title=""></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/admin.html">admin</a></li>
            
                <li><a href="..&#x2F;classes/all-modules.html">all-modules</a></li>
            
                <li><a href="..&#x2F;classes/default.html">default</a></li>
            
                <li><a href="..&#x2F;classes/jcarousel.html">jcarousel</a></li>
            
                <li><a href="..&#x2F;classes/tinymce.plugins.AutoSave.html">tinymce.plugins.AutoSave</a></li>
            
                <li><a href="..&#x2F;classes/tinymce.plugins.ContextMenu.html">tinymce.plugins.ContextMenu</a></li>
            
                <li><a href="..&#x2F;classes/usuario.html">usuario</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="..&#x2F;modules/ad-actions.html">ad-actions</a></li>
            
                <li><a href="..&#x2F;modules/add-class-middle.html">add-class-middle</a></li>
            
                <li><a href="..&#x2F;modules/add-favorites.html">add-favorites</a></li>
            
                <li><a href="..&#x2F;modules/all-checked-uncheked.html">all-checked-uncheked</a></li>
            
                <li><a href="..&#x2F;modules/banner-top classified.html">banner-top classified</a></li>
            
                <li><a href="..&#x2F;modules/carousel-products.html">carousel-products</a></li>
            
                <li><a href="..&#x2F;modules/count-word.html">count-word</a></li>
            
                <li><a href="..&#x2F;modules/data-ubigeo.html">data-ubigeo</a></li>
            
                <li><a href="..&#x2F;modules/geotags.html">geotags</a></li>
            
                <li><a href="..&#x2F;modules/impress-ad-list.html">impress-ad-list</a></li>
            
                <li><a href="..&#x2F;modules/lightbox-logIn-signUp.html">lightbox-logIn-signUp</a></li>
            
                <li><a href="..&#x2F;modules/moduleName.html">moduleName</a></li>
            
                <li><a href="..&#x2F;modules/placeholder.html">placeholder</a></li>
            
                <li><a href="..&#x2F;modules/preview-impress.html">preview-impress</a></li>
            
                <li><a href="..&#x2F;modules/register-category.html">register-category</a></li>
            
                <li><a href="..&#x2F;modules/remove-class-home.html">remove-class-home</a></li>
            
                <li><a href="..&#x2F;modules/report-ad.html">report-ad</a></li>
            
                <li><a href="..&#x2F;modules/scrollTop.html">scrollTop</a></li>
            
                <li><a href="..&#x2F;modules/search-categories.html">search-categories</a></li>
            
                <li><a href="..&#x2F;modules/send-ad-friend.html">send-ad-friend</a></li>
            
                <li><a href="..&#x2F;modules/send-list-ad-email.html">send-list-ad-email</a></li>
            
                <li><a href="..&#x2F;modules/show-advanced-search.html">show-advanced-search</a></li>
            
                <li><a href="..&#x2F;modules/show-example-ads.html">show-example-ads</a></li>
            
                <li><a href="..&#x2F;modules/show-login-trigger.html">show-login-trigger</a></li>
            
                <li><a href="..&#x2F;modules/show-photo-products.html">show-photo-products</a></li>
            
                <li><a href="..&#x2F;modules/show-popup.html">show-popup</a></li>
            
                <li><a href="..&#x2F;modules/show-questions.html">show-questions</a></li>
            
                <li><a href="..&#x2F;modules/show-register-trigger.html">show-register-trigger</a></li>
            
                <li><a href="..&#x2F;modules/show-video.html">show-video</a></li>
            
                <li><a href="..&#x2F;modules/showMoreCategories.html">showMoreCategories</a></li>
            
                <li><a href="..&#x2F;modules/some-module4.html">some-module4</a></li>
            
                <li><a href="..&#x2F;modules/tinymce-register.html">tinymce-register</a></li>
            
                <li><a href="..&#x2F;modules/uploader-photos.html">uploader-photos</a></li>
            
                <li><a href="..&#x2F;modules/validate.html">validate</a></li>
            
                <li><a href="..&#x2F;modules/validate-document.html">validate-document</a></li>
            
                <li><a href="..&#x2F;modules/validate-image.html">validate-image</a></li>
            
                <li><a href="..&#x2F;modules/venta.html">venta</a></li>
            
                <li><a href="..&#x2F;modules/yOSON.html">yOSON</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: libs&#x2F;plugins&#x2F;tiny_mce&#x2F;plugins&#x2F;template&#x2F;editor_plugin_src.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
&#x2F;**
 * editor_plugin_src.js
 *
 * Copyright 2009, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http:&#x2F;&#x2F;tinymce.moxiecode.com&#x2F;license
 * Contributing: http:&#x2F;&#x2F;tinymce.moxiecode.com&#x2F;contributing
 *&#x2F;

(function() {
	var each = tinymce.each;

	tinymce.create(&#x27;tinymce.plugins.TemplatePlugin&#x27;, {
		init : function(ed, url) {
			var t = this;

			t.editor = ed;

			&#x2F;&#x2F; Register commands
			ed.addCommand(&#x27;mceTemplate&#x27;, function(ui) {
				ed.windowManager.open({
					file : url + &#x27;&#x2F;template.htm&#x27;,
					width : ed.getParam(&#x27;template_popup_width&#x27;, 750),
					height : ed.getParam(&#x27;template_popup_height&#x27;, 600),
					inline : 1
				}, {
					plugin_url : url
				});
			});

			ed.addCommand(&#x27;mceInsertTemplate&#x27;, t._insertTemplate, t);

			&#x2F;&#x2F; Register buttons
			ed.addButton(&#x27;template&#x27;, {title : &#x27;template.desc&#x27;, cmd : &#x27;mceTemplate&#x27;});

			ed.onPreProcess.add(function(ed, o) {
				var dom = ed.dom;

				each(dom.select(&#x27;div&#x27;, o.node), function(e) {
					if (dom.hasClass(e, &#x27;mceTmpl&#x27;)) {
						each(dom.select(&#x27;*&#x27;, e), function(e) {
							if (dom.hasClass(e, ed.getParam(&#x27;template_mdate_classes&#x27;, &#x27;mdate&#x27;).replace(&#x2F;\s+&#x2F;g, &#x27;|&#x27;)))
								e.innerHTML = t._getDateTime(new Date(), ed.getParam(&quot;template_mdate_format&quot;, ed.getLang(&quot;template.mdate_format&quot;)));
						});

						t._replaceVals(e);
					}
				});
			});
		},

		getInfo : function() {
			return {
				longname : &#x27;Template plugin&#x27;,
				author : &#x27;Moxiecode Systems AB&#x27;,
				authorurl : &#x27;http:&#x2F;&#x2F;www.moxiecode.com&#x27;,
				infourl : &#x27;http:&#x2F;&#x2F;wiki.moxiecode.com&#x2F;index.php&#x2F;TinyMCE:Plugins&#x2F;template&#x27;,
				version : tinymce.majorVersion + &quot;.&quot; + tinymce.minorVersion
			};
		},

		_insertTemplate : function(ui, v) {
			var t = this, ed = t.editor, h, el, dom = ed.dom, sel = ed.selection.getContent();

			h = v.content;

			each(t.editor.getParam(&#x27;template_replace_values&#x27;), function(v, k) {
				if (typeof(v) != &#x27;function&#x27;)
					h = h.replace(new RegExp(&#x27;\\{\\$&#x27; + k + &#x27;\\}&#x27;, &#x27;g&#x27;), v);
			});

			el = dom.create(&#x27;div&#x27;, null, h);

			&#x2F;&#x2F; Find template element within div
			n = dom.select(&#x27;.mceTmpl&#x27;, el);
			if (n &amp;&amp; n.length &gt; 0) {
				el = dom.create(&#x27;div&#x27;, null);
				el.appendChild(n[0].cloneNode(true));
			}

			function hasClass(n, c) {
				return new RegExp(&#x27;\\b&#x27; + c + &#x27;\\b&#x27;, &#x27;g&#x27;).test(n.className);
			};

			each(dom.select(&#x27;*&#x27;, el), function(n) {
				&#x2F;&#x2F; Replace cdate
				if (hasClass(n, ed.getParam(&#x27;template_cdate_classes&#x27;, &#x27;cdate&#x27;).replace(&#x2F;\s+&#x2F;g, &#x27;|&#x27;)))
					n.innerHTML = t._getDateTime(new Date(), ed.getParam(&quot;template_cdate_format&quot;, ed.getLang(&quot;template.cdate_format&quot;)));

				&#x2F;&#x2F; Replace mdate
				if (hasClass(n, ed.getParam(&#x27;template_mdate_classes&#x27;, &#x27;mdate&#x27;).replace(&#x2F;\s+&#x2F;g, &#x27;|&#x27;)))
					n.innerHTML = t._getDateTime(new Date(), ed.getParam(&quot;template_mdate_format&quot;, ed.getLang(&quot;template.mdate_format&quot;)));

				&#x2F;&#x2F; Replace selection
				if (hasClass(n, ed.getParam(&#x27;template_selected_content_classes&#x27;, &#x27;selcontent&#x27;).replace(&#x2F;\s+&#x2F;g, &#x27;|&#x27;)))
					n.innerHTML = sel;
			});

			t._replaceVals(el);

			ed.execCommand(&#x27;mceInsertContent&#x27;, false, el.innerHTML);
			ed.addVisual();
		},

		_replaceVals : function(e) {
			var dom = this.editor.dom, vl = this.editor.getParam(&#x27;template_replace_values&#x27;);

			each(dom.select(&#x27;*&#x27;, e), function(e) {
				each(vl, function(v, k) {
					if (dom.hasClass(e, k)) {
						if (typeof(vl[k]) == &#x27;function&#x27;)
							vl[k](e);
					}
				});
			});
		},

		_getDateTime : function(d, fmt) {
				if (!fmt)
					return &quot;&quot;;

				function addZeros(value, len) {
					var i;

					value = &quot;&quot; + value;

					if (value.length &lt; len) {
						for (i=0; i&lt;(len-value.length); i++)
							value = &quot;0&quot; + value;
					}

					return value;
				}

				fmt = fmt.replace(&quot;%D&quot;, &quot;%m&#x2F;%d&#x2F;%y&quot;);
				fmt = fmt.replace(&quot;%r&quot;, &quot;%I:%M:%S %p&quot;);
				fmt = fmt.replace(&quot;%Y&quot;, &quot;&quot; + d.getFullYear());
				fmt = fmt.replace(&quot;%y&quot;, &quot;&quot; + d.getYear());
				fmt = fmt.replace(&quot;%m&quot;, addZeros(d.getMonth()+1, 2));
				fmt = fmt.replace(&quot;%d&quot;, addZeros(d.getDate(), 2));
				fmt = fmt.replace(&quot;%H&quot;, &quot;&quot; + addZeros(d.getHours(), 2));
				fmt = fmt.replace(&quot;%M&quot;, &quot;&quot; + addZeros(d.getMinutes(), 2));
				fmt = fmt.replace(&quot;%S&quot;, &quot;&quot; + addZeros(d.getSeconds(), 2));
				fmt = fmt.replace(&quot;%I&quot;, &quot;&quot; + ((d.getHours() + 11) % 12 + 1));
				fmt = fmt.replace(&quot;%p&quot;, &quot;&quot; + (d.getHours() &lt; 12 ? &quot;AM&quot; : &quot;PM&quot;));
				fmt = fmt.replace(&quot;%B&quot;, &quot;&quot; + this.editor.getLang(&quot;template_months_long&quot;).split(&#x27;,&#x27;)[d.getMonth()]);
				fmt = fmt.replace(&quot;%b&quot;, &quot;&quot; + this.editor.getLang(&quot;template_months_short&quot;).split(&#x27;,&#x27;)[d.getMonth()]);
				fmt = fmt.replace(&quot;%A&quot;, &quot;&quot; + this.editor.getLang(&quot;template_day_long&quot;).split(&#x27;,&#x27;)[d.getDay()]);
				fmt = fmt.replace(&quot;%a&quot;, &quot;&quot; + this.editor.getLang(&quot;template_day_short&quot;).split(&#x27;,&#x27;)[d.getDay()]);
				fmt = fmt.replace(&quot;%%&quot;, &quot;%&quot;);

				return fmt;
		}
	});

	&#x2F;&#x2F; Register plugin
	tinymce.PluginManager.add(&#x27;template&#x27;, tinymce.plugins.TemplatePlugin);
})();
    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
